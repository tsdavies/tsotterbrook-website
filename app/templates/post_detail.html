{% extends "layout.html" %}
{% block content %}
<h1>{{ post.title }}</h1>
<p>{{ post.content }}</p>
<p>By {{ post.author or 'Anonymous' }} on {{ post.timestamp }}</p>

<!-- Edit and Delete Buttons -->
<p>
    <a href="{{ url_for('edit_post', post_id=post.id) }}">Edit Post</a> |
    <a href="{{ url_for('delete_post', post_id=post.id) }}" onclick="return confirm('Are you sure you want to delete this post?');">Delete Post</a>
</p>

<hr>
<h2>Comments</h2>

{% if post.comments and post.comments|length > 0 %}
<ul>
    {% for comment in post.comments %}
    <li>
        {{ comment.content }} - <strong>{{ comment.author or 'Anonymous' }}</strong>
        <a href="{{ url_for('delete_comment', comment_id=comment.id) }}" onclick="return confirm('Are you sure you want to delete this comment?');">Delete</a>
    </li>
    {% endfor %}
</ul>
{% else %}
<p>No comments yet. Be the first to comment!</p>
{% endif %}

<h3>Add a Comment</h3>
<form method="POST" action="{{ url_for('post_detail', post_id=post.id) }}">
    {{ form.hidden_tag() }}
    <p>
        {{ form.content.label }}<br>
        {{ form.content(size=50) }}
    </p>
    <p>
        {{ form.author.label }}<br>
        {{ form.author(size=20) }}
    </p>
    <p>{{ form.submit() }}</p>
</form>
{% endblock %}
